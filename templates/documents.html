{% extends "base.html" %}
{% import "components/crud_base.html" as crud %}

{% block content %}
  {{ crud.crud_page(
       "Documenti",
       "/documents/upload",
       "documents-list",
       None,          
       documents,
       current_user
  ) }}
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    fetch('/notifiche/mark-read/documento', {method: 'POST', credentials: 'include'})
      .then(() => {
        if (window.htmx) {
          htmx.trigger(document.body, 'refreshDocumentiBadgeEvent');
        }
      });
  });
</script>
{% endblock %}
